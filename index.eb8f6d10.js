function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},s={},i=r.parcelRequire8e6f;null==i&&((i=function(e){if(e in n)return n[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},r.parcelRequire8e6f=i),i.register("R5nvG",(function(e,t){var r,n="undefined"!=typeof self?self:this,s=function(){function e(){this.fetch=!1,this.DOMException=n.DOMException}return e.prototype=n,new e}();r=s,function(e){var t={searchParams:"URLSearchParams"in r,iterable:"Symbol"in r&&"iterator"in Symbol,blob:"FileReader"in r&&"Blob"in r&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in r,arrayBuffer:"ArrayBuffer"in r};if(t.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function i(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function o(e){return"string"!=typeof e&&(e=String(e)),e}function a(e){var r={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return t.iterable&&(r[Symbol.iterator]=function(){return r}),r}function h(e){this.map={},e instanceof h?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function c(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function u(e){var t=new FileReader,r=c(t);return t.readAsArrayBuffer(e),r}function d(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function f(){return this.bodyUsed=!1,this._initBody=function(e){var r;this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:t.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:t.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():t.arrayBuffer&&t.blob&&(r=e)&&DataView.prototype.isPrototypeOf(r)?(this._bodyArrayBuffer=d(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):t.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||s(e))?this._bodyArrayBuffer=d(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},t.blob&&(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?l(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var e,t,r,n=l(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=c(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},t.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(e,t){e=i(e),t=o(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},h.prototype.delete=function(e){delete this.map[i(e)]},h.prototype.get=function(e){return e=i(e),this.has(e)?this.map[e]:null},h.prototype.has=function(e){return this.map.hasOwnProperty(i(e))},h.prototype.set=function(e,t){this.map[i(e)]=o(t)},h.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},h.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),a(e)},h.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},h.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),a(e)},t.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function y(e,t){var r,n,s=(t=t||{}).body;if(e instanceof y){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new h(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,s||null==e._bodyInit||(s=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new h(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),p.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&s)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(s)}function v(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),s=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(s))}})),t}function g(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new h(t.headers),this.url=t.url||"",this._initBody(e)}y.prototype.clone=function(){return new y(this,{body:this._bodyInit})},f.call(y.prototype),f.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var m=[301,302,303,307,308];g.redirect=function(e,t){if(-1===m.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.DOMException=r.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function b(r,n){return new Promise((function(s,i){var o=new y(r,n);if(o.signal&&o.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function l(){a.abort()}a.onload=function(){var e,t,r={status:a.status,statusText:a.statusText,headers:(e=a.getAllResponseHeaders()||"",t=new h,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var s=r.join(":").trim();t.append(n,s)}})),t)};r.url="responseURL"in a?a.responseURL:r.headers.get("X-Request-URL");var n="response"in a?a.response:a.responseText;s(new g(n,r))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&t.blob&&(a.responseType="blob"),o.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),o.signal&&(o.signal.addEventListener("abort",l),a.onreadystatechange=function(){4===a.readyState&&o.signal.removeEventListener("abort",l)}),a.send(void 0===o._bodyInit?null:o._bodyInit)}))}b.polyfill=!0,r.fetch||(r.fetch=b,r.Headers=h,r.Request=y,r.Response=g),e.Headers=h,e.Request=y,e.Response=g,e.fetch=b,Object.defineProperty(e,"__esModule",{value:!0})}({}),s.fetch.ponyfill=!0,delete s.fetch.polyfill;var i=s;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t})),i.register("1EZeK",(function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"==typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()})),i.register("ln8A6",(function(e,t){e.exports=JSON.parse('{"name":"websocket","description":"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.","keywords":["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],"author":"Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)","contributors":["IÃ±aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],"version":"1.0.34","repository":{"type":"git","url":"https://github.com/theturtle32/WebSocket-Node.git"},"homepage":"https://github.com/theturtle32/WebSocket-Node","engines":{"node":">=4.0.0"},"dependencies":{"bufferutil":"^4.0.1","debug":"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2","yaeti":"^0.0.6"},"devDependencies":{"buffer-equal":"^1.0.0","gulp":"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1","jshint":"^2.0.0","tape":"^4.9.1"},"config":{"verbose":false},"scripts":{"test":"tape test/unit/*.js","gulp":"gulp"},"main":"index","directories":{"lib":"./lib"},"browser":"lib/browser.js","license":"Apache-2.0"}')}));class o{constructor(e,t){this.root=e,this.submitCallback=t,this.root.innerHTML='\n<form name="data" data-template-data-form>\n    <textarea name="payload" rows="8"\n          class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-green-500 focus:border-green-500"\n          placeholder="Paste your sensitive data here..." required></textarea>\n    <div class="flex flex-row-reverse mt-2">\n        <button class="bg-green-600 hover:bg-green-700 font-bold text-white py-2 px-4 rounded"\n                type="submit">Submit\n        </button>\n    </div>\n</form>\n',this.form=e.querySelector("[data-template-data-form]"),this.payloadTextArea=this.form.querySelector('textarea[name="payload"]'),this.addEventListener()}addEventListener(){this.form.addEventListener("submit",(e=>{this.submitCallback(this.payloadTextArea.value,e)}))}}
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var a,h,l;h=function(e){var t,r,n=m(e),s=n[0],i=n[1],o=new p(function(e,t,r){return 3*(t+r)/4-r}(0,s,i)),a=0,h=i>0?s-4:s;for(r=0;r<h;r+=4)t=f[e.charCodeAt(r)]<<18|f[e.charCodeAt(r+1)]<<12|f[e.charCodeAt(r+2)]<<6|f[e.charCodeAt(r+3)],o[a++]=t>>16&255,o[a++]=t>>8&255,o[a++]=255&t;2===i&&(t=f[e.charCodeAt(r)]<<2|f[e.charCodeAt(r+1)]>>4,o[a++]=255&t);1===i&&(t=f[e.charCodeAt(r)]<<10|f[e.charCodeAt(r+1)]<<4|f[e.charCodeAt(r+2)]>>2,o[a++]=t>>8&255,o[a++]=255&t);return o},l=function(e){for(var t,r=e.length,n=r%3,s=[],i=16383,o=0,a=r-n;o<a;o+=i)s.push(b(e,o,o+i>a?a:o+i));1===n?(t=e[r-1],s.push(d[t>>2]+d[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],s.push(d[t>>10]+d[t>>4&63]+d[t<<2&63]+"="));return s.join("")}
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */;for(var c,u,d=[],f=[],p="undefined"!=typeof Uint8Array?Uint8Array:Array,y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",v=0,g=y.length;v<g;++v)d[v]=y[v],f[y.charCodeAt(v)]=v;function m(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function b(e,t,r){for(var n,s,i=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),i.push(d[(s=n)>>18&63]+d[s>>12&63]+d[s>>6&63]+d[63&s]);return i.join("")}f["-".charCodeAt(0)]=62,f["_".charCodeAt(0)]=63,c=function(e,t,r,n,s){var i,o,a=8*s-n-1,h=(1<<a)-1,l=h>>1,c=-7,u=r?s-1:0,d=r?-1:1,f=e[t+u];for(u+=d,i=f&(1<<-c)-1,f>>=-c,c+=a;c>0;i=256*i+e[t+u],u+=d,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=n;c>0;o=256*o+e[t+u],u+=d,c-=8);if(0===i)i=1-l;else{if(i===h)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,n),i-=l}return(f?-1:1)*o*Math.pow(2,i-n)},u=function(e,t,r,n,s,i){var o,a,h,l=8*i-s-1,c=(1<<l)-1,u=c>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(h=Math.pow(2,-o))<1&&(o--,h*=2),(t+=o+u>=1?d/h:d*Math.pow(2,1-u))*h>=2&&(o++,h/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(t*h-1)*Math.pow(2,s),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,s),o=0));s>=8;e[r+f]=255&a,f+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;e[r+f]=255&o,f+=p,o/=256,l-=8);e[r+f-p]|=128*y};var w="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;a=T;var _=2147483647;function E(e){if(e>_)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,T.prototype),t}function T(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return A(e)}return S(e,t,r)}function S(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!T.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var r=0|j(e,t),n=E(r),s=n.write(e,t);s!==r&&(n=n.slice(0,s));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(re(e,Uint8Array)){var t=new Uint8Array(e);return O(t.buffer,t.byteOffset,t.byteLength)}return x(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(re(e,ArrayBuffer)||e&&re(e.buffer,ArrayBuffer))return O(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(re(e,SharedArrayBuffer)||e&&re(e.buffer,SharedArrayBuffer)))return O(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return T.from(n,t,r);var s=function(e){if(T.isBuffer(e)){var t=0|R(e.length),r=E(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||ne(e.length)?E(0):x(e);if("Buffer"===e.type&&Array.isArray(e.data))return x(e.data)}(e);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return T.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function k(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function A(e){return k(e),E(e<0?0:0|R(e))}function x(e){for(var t=e.length<0?0:0|R(e.length),r=E(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}function O(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,T.prototype),n}function R(e){if(e>=_)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+_.toString(16)+" bytes");return 0|e}function j(e,t){if(T.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||re(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var s=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return Q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return ee(e).length;default:if(s)return n?-1:Q(e).length;t=(""+t).toLowerCase(),s=!0}}function P(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return H(this,t,r);case"utf8":case"utf-8":return F(this,t,r);case"ascii":return J(this,t,r);case"latin1":case"binary":return z(this,t,r);case"base64":return M(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function C(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function U(e,t,r,n,s){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),ne(r=+r)&&(r=s?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(s)return-1;r=e.length-1}else if(r<0){if(!s)return-1;r=0}if("string"==typeof t&&(t=T.from(t,n)),T.isBuffer(t))return 0===t.length?-1:B(e,t,r,n,s);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):B(e,[t],r,n,s);throw new TypeError("val must be string, number or Buffer")}function B(e,t,r,n,s){var i,o=1,a=e.length,h=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,a/=2,h/=2,r/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(s){var c=-1;for(i=r;i<a;i++)if(l(e,i)===l(t,-1===c?0:i-c)){if(-1===c&&(c=i),i-c+1===h)return c*o}else-1!==c&&(i-=i-c),c=-1}else for(r+h>a&&(r=a-h),i=r;i>=0;i--){for(var u=!0,d=0;d<h;d++)if(l(e,i+d)!==l(t,d)){u=!1;break}if(u)return i}return-1}function $(e,t,r,n){r=Number(r)||0;var s=e.length-r;n?(n=Number(n))>s&&(n=s):n=s;var i=t.length;n>i/2&&(n=i/2);for(var o=0;o<n;++o){var a=parseInt(t.substr(2*o,2),16);if(ne(a))return o;e[r+o]=a}return o}function I(e,t,r,n){return te(Q(t,e.length-r),e,r,n)}function L(e,t,r,n){return te(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function D(e,t,r,n){return te(ee(t),e,r,n)}function N(e,t,r,n){return te(function(e,t){for(var r,n,s,i=[],o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,s=r%256,i.push(s),i.push(n);return i}(t,e.length-r),e,r,n)}function M(e,t,r){return 0===t&&r===e.length?l(e):l(e.slice(t,r))}function F(e,t,r){r=Math.min(e.length,r);for(var n=[],s=t;s<r;){var i,o,a,h,l=e[s],c=null,u=l>239?4:l>223?3:l>191?2:1;if(s+u<=r)switch(u){case 1:l<128&&(c=l);break;case 2:128==(192&(i=e[s+1]))&&(h=(31&l)<<6|63&i)>127&&(c=h);break;case 3:i=e[s+1],o=e[s+2],128==(192&i)&&128==(192&o)&&(h=(15&l)<<12|(63&i)<<6|63&o)>2047&&(h<55296||h>57343)&&(c=h);break;case 4:i=e[s+1],o=e[s+2],a=e[s+3],128==(192&i)&&128==(192&o)&&128==(192&a)&&(h=(15&l)<<18|(63&i)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(c=h)}null===c?(c=65533,u=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),s+=u}return function(e){var t=e.length;if(t<=q)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=q));return r}(n)}T.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),T.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(T.prototype,"parent",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.buffer}}),Object.defineProperty(T.prototype,"offset",{enumerable:!0,get:function(){if(T.isBuffer(this))return this.byteOffset}}),T.poolSize=8192,T.from=function(e,t,r){return S(e,t,r)},Object.setPrototypeOf(T.prototype,Uint8Array.prototype),Object.setPrototypeOf(T,Uint8Array),T.alloc=function(e,t,r){return function(e,t,r){return k(e),e<=0?E(e):void 0!==t?"string"==typeof r?E(e).fill(t,r):E(e).fill(t):E(e)}(e,t,r)},T.allocUnsafe=function(e){return A(e)},T.allocUnsafeSlow=function(e){return A(e)},T.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==T.prototype},T.compare=function(e,t){if(re(e,Uint8Array)&&(e=T.from(e,e.offset,e.byteLength)),re(t,Uint8Array)&&(t=T.from(t,t.offset,t.byteLength)),!T.isBuffer(e)||!T.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,s=0,i=Math.min(r,n);s<i;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0},T.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},T.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return T.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=T.allocUnsafe(t),s=0;for(r=0;r<e.length;++r){var i=e[r];if(re(i,Uint8Array))s+i.length>n.length?T.from(i).copy(n,s):Uint8Array.prototype.set.call(n,i,s);else{if(!T.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(n,s)}s+=i.length}return n},T.byteLength=j,T.prototype._isBuffer=!0,T.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)C(this,t,t+1);return this},T.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)C(this,t,t+3),C(this,t+1,t+2);return this},T.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)C(this,t,t+7),C(this,t+1,t+6),C(this,t+2,t+5),C(this,t+3,t+4);return this},T.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?F(this,0,e):P.apply(this,arguments)},T.prototype.toLocaleString=T.prototype.toString,T.prototype.equals=function(e){if(!T.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===T.compare(this,e)},T.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},w&&(T.prototype[w]=T.prototype.inspect),T.prototype.compare=function(e,t,r,n,s){if(re(e,Uint8Array)&&(e=T.from(e,e.offset,e.byteLength)),!T.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),t<0||r>e.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&t>=r)return 0;if(n>=s)return-1;if(t>=r)return 1;if(this===e)return 0;for(var i=(s>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0),a=Math.min(i,o),h=this.slice(n,s),l=e.slice(t,r),c=0;c<a;++c)if(h[c]!==l[c]){i=h[c],o=l[c];break}return i<o?-1:o<i?1:0},T.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},T.prototype.indexOf=function(e,t,r){return U(this,e,t,r,!0)},T.prototype.lastIndexOf=function(e,t,r){return U(this,e,t,r,!1)},T.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var s=this.length-t;if((void 0===r||r>s)&&(r=s),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var i=!1;;)switch(n){case"hex":return $(this,e,t,r);case"utf8":case"utf-8":return I(this,e,t,r);case"ascii":case"latin1":case"binary":return L(this,e,t,r);case"base64":return D(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},T.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var q=4096;function J(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(127&e[s]);return n}function z(e,t,r){var n="";r=Math.min(e.length,r);for(var s=t;s<r;++s)n+=String.fromCharCode(e[s]);return n}function H(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var s="",i=t;i<r;++i)s+=se[e[i]];return s}function G(e,t,r){for(var n=e.slice(t,r),s="",i=0;i<n.length-1;i+=2)s+=String.fromCharCode(n[i]+256*n[i+1]);return s}function K(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function V(e,t,r,n,s,i){if(!T.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>s||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function W(e,t,r,n,s,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Y(e,t,r,n,s){return t=+t,r>>>=0,s||W(e,0,r,4),u(e,t,r,n,23,4),r+4}function Z(e,t,r,n,s){return t=+t,r>>>=0,s||W(e,0,r,8),u(e,t,r,n,52,8),r+8}T.prototype.slice=function(e,t){var r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,T.prototype),n},T.prototype.readUintLE=T.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||K(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n},T.prototype.readUintBE=T.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||K(e,t,this.length);for(var n=this[e+--t],s=1;t>0&&(s*=256);)n+=this[e+--t]*s;return n},T.prototype.readUint8=T.prototype.readUInt8=function(e,t){return e>>>=0,t||K(e,1,this.length),this[e]},T.prototype.readUint16LE=T.prototype.readUInt16LE=function(e,t){return e>>>=0,t||K(e,2,this.length),this[e]|this[e+1]<<8},T.prototype.readUint16BE=T.prototype.readUInt16BE=function(e,t){return e>>>=0,t||K(e,2,this.length),this[e]<<8|this[e+1]},T.prototype.readUint32LE=T.prototype.readUInt32LE=function(e,t){return e>>>=0,t||K(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},T.prototype.readUint32BE=T.prototype.readUInt32BE=function(e,t){return e>>>=0,t||K(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},T.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||K(e,t,this.length);for(var n=this[e],s=1,i=0;++i<t&&(s*=256);)n+=this[e+i]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*t)),n},T.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||K(e,t,this.length);for(var n=t,s=1,i=this[e+--n];n>0&&(s*=256);)i+=this[e+--n]*s;return i>=(s*=128)&&(i-=Math.pow(2,8*t)),i},T.prototype.readInt8=function(e,t){return e>>>=0,t||K(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},T.prototype.readInt16LE=function(e,t){e>>>=0,t||K(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},T.prototype.readInt16BE=function(e,t){e>>>=0,t||K(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},T.prototype.readInt32LE=function(e,t){return e>>>=0,t||K(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},T.prototype.readInt32BE=function(e,t){return e>>>=0,t||K(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},T.prototype.readFloatLE=function(e,t){return e>>>=0,t||K(e,4,this.length),c(this,e,!0,23,4)},T.prototype.readFloatBE=function(e,t){return e>>>=0,t||K(e,4,this.length),c(this,e,!1,23,4)},T.prototype.readDoubleLE=function(e,t){return e>>>=0,t||K(e,8,this.length),c(this,e,!0,52,8)},T.prototype.readDoubleBE=function(e,t){return e>>>=0,t||K(e,8,this.length),c(this,e,!1,52,8)},T.prototype.writeUintLE=T.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||V(this,e,t,r,Math.pow(2,8*r)-1,0);var s=1,i=0;for(this[t]=255&e;++i<r&&(s*=256);)this[t+i]=e/s&255;return t+r},T.prototype.writeUintBE=T.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t>>>=0,r>>>=0,n)||V(this,e,t,r,Math.pow(2,8*r)-1,0);var s=r-1,i=1;for(this[t+s]=255&e;--s>=0&&(i*=256);)this[t+s]=e/i&255;return t+r},T.prototype.writeUint8=T.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,1,255,0),this[t]=255&e,t+1},T.prototype.writeUint16LE=T.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},T.prototype.writeUint16BE=T.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},T.prototype.writeUint32LE=T.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},T.prototype.writeUint32BE=T.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},T.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var s=Math.pow(2,8*r-1);V(this,e,t,r,s-1,-s)}var i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},T.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){var s=Math.pow(2,8*r-1);V(this,e,t,r,s-1,-s)}var i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o>>0)-a&255;return t+r},T.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},T.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},T.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},T.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},T.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||V(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},T.prototype.writeFloatLE=function(e,t,r){return Y(this,e,t,!0,r)},T.prototype.writeFloatBE=function(e,t,r){return Y(this,e,t,!1,r)},T.prototype.writeDoubleLE=function(e,t,r){return Z(this,e,t,!0,r)},T.prototype.writeDoubleBE=function(e,t,r){return Z(this,e,t,!1,r)},T.prototype.copy=function(e,t,r,n){if(!T.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var s=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),s},T.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!T.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var s=e.charCodeAt(0);("utf8"===n&&s<128||"latin1"===n)&&(e=s)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=T.isBuffer(e)?e:T.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};var X=/[^+/0-9A-Za-z-_]/g;function Q(e,t){var r;t=t||1/0;for(var n=e.length,s=null,i=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!s){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&i.push(239,191,189);continue}s=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),s=r;continue}r=65536+(s-55296<<10|r-56320)}else s&&(t-=3)>-1&&i.push(239,191,189);if(s=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function ee(e){return h(function(e){if((e=(e=e.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function te(e,t,r,n){for(var s=0;s<n&&!(s+r>=t.length||s>=e.length);++s)t[s+r]=e[s];return s}function re(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function ne(e){return e!=e}var se=function(){for(var e="0123456789abcdef",t=new Array(256),r=0;r<16;++r)for(var n=16*r,s=0;s<16;++s)t[n+s]=e[r]+e[s];return t}(),ie=a;const oe="3.7.5",ae=oe,he="function"==typeof atob,le="function"==typeof btoa,ce="function"==typeof ie,ue="function"==typeof TextDecoder?new TextDecoder:void 0,de="function"==typeof TextEncoder?new TextEncoder:void 0,fe=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),pe=(e=>{let t={};return fe.forEach(((e,r)=>t[e]=r)),t})(),ye=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ve=String.fromCharCode.bind(String),ge="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),me=e=>e.replace(/=/g,"").replace(/[+\/]/g,(e=>"+"==e?"-":"_")),be=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),we=e=>{let t,r,n,s,i="";const o=e.length%3;for(let o=0;o<e.length;){if((r=e.charCodeAt(o++))>255||(n=e.charCodeAt(o++))>255||(s=e.charCodeAt(o++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|s,i+=fe[t>>18&63]+fe[t>>12&63]+fe[t>>6&63]+fe[63&t]}return o?i.slice(0,o-3)+"===".substring(o):i},_e=le?e=>btoa(e):ce?e=>ie.from(e,"binary").toString("base64"):we,Ee=ce?e=>ie.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(ve.apply(null,e.subarray(r,r+4096)));return _e(t.join(""))},Te=(e,t=!1)=>t?me(Ee(e)):Ee(e),Se=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?ve(192|t>>>6)+ve(128|63&t):ve(224|t>>>12&15)+ve(128|t>>>6&63)+ve(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return ve(240|t>>>18&7)+ve(128|t>>>12&63)+ve(128|t>>>6&63)+ve(128|63&t)},ke=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,Ae=e=>e.replace(ke,Se),xe=ce?e=>ie.from(e,"utf8").toString("base64"):de?e=>Ee(de.encode(e)):e=>_e(Ae(e)),Oe=(e,t=!1)=>t?me(xe(e)):xe(e),Re=e=>Oe(e,!0),je=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Pe=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return ve(55296+(t>>>10))+ve(56320+(1023&t));case 3:return ve((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return ve((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Ce=e=>e.replace(je,Pe),Ue=e=>{if(e=e.replace(/\s+/g,""),!ye.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,s="";for(let i=0;i<e.length;)t=pe[e.charAt(i++)]<<18|pe[e.charAt(i++)]<<12|(r=pe[e.charAt(i++)])<<6|(n=pe[e.charAt(i++)]),s+=64===r?ve(t>>16&255):64===n?ve(t>>16&255,t>>8&255):ve(t>>16&255,t>>8&255,255&t);return s},Be=he?e=>atob(be(e)):ce?e=>ie.from(e,"base64").toString("binary"):Ue,$e=ce?e=>ge(ie.from(e,"base64")):e=>ge(Be(e).split("").map((e=>e.charCodeAt(0)))),Ie=e=>$e(De(e)),Le=ce?e=>ie.from(e,"base64").toString("utf8"):ue?e=>ue.decode($e(e)):e=>Ce(Be(e)),De=e=>be(e.replace(/[-_]/g,(e=>"-"==e?"+":"/"))),Ne=e=>Le(De(e)),Me=e=>({value:e,enumerable:!1,writable:!0,configurable:!0}),Fe=function(){const e=(e,t)=>Object.defineProperty(String.prototype,e,Me(t));e("fromBase64",(function(){return Ne(this)})),e("toBase64",(function(e){return Oe(this,e)})),e("toBase64URI",(function(){return Oe(this,!0)})),e("toBase64URL",(function(){return Oe(this,!0)})),e("toUint8Array",(function(){return Ie(this)}))},qe=function(){const e=(e,t)=>Object.defineProperty(Uint8Array.prototype,e,Me(t));e("toBase64",(function(e){return Te(this,e)})),e("toBase64URI",(function(){return Te(this,!0)})),e("toBase64URL",(function(){return Te(this,!0)}))},Je={version:oe,VERSION:ae,atob:Be,atobPolyfill:Ue,btoa:_e,btoaPolyfill:we,fromBase64:Ne,toBase64:Oe,encode:Oe,encodeURI:Re,encodeURL:Re,utob:Ae,btou:Ce,decode:Ne,isValid:e=>{if("string"!=typeof e)return!1;const t=e.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(t)||!/[^\s0-9a-zA-Z\-_]/.test(t)},fromUint8Array:Te,toUint8Array:Ie,extendString:Fe,extendUint8Array:qe,extendBuiltins:()=>{Fe(),qe()}},ze=e=>Je.fromUint8Array(new Uint8Array(e),!0),He=e=>Je.toUint8Array(e).buffer,{subtle:Ge}=globalThis.crypto,Ke=async e=>{const t=new TextEncoder,r=await(async(e=256)=>await Ge.generateKey({name:"AES-CBC",length:e},!0,["encrypt","decrypt"]))(),n=await crypto.subtle.exportKey("raw",r),s=crypto.getRandomValues(new Uint8Array(16)),i=await crypto.subtle.encrypt({name:"AES-CBC",iv:s},r,t.encode(e));return{key:ze(n),iv:ze(s),cipherText:ze(i)}},Ve='\n<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n    <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n    <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"></path>\n    <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path>\n</svg>\n',We=`\n<div class="relative">\n    <span class="absolute inset-y-0 right-0 flex items-center border-l-2">\n        <button type="button" data-template-link-button class="p-1 focus:outline-none focus:shadow-outline">\n            ${Ve}\n        </button>\n    </span>\n    <input type="url" data-template-link-input\n           class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 py-2 pr-10"\n           placeholder="An error occurred"  autocomplete="off" readonly>\n</div>\n`;let Ye;var Ze;(Ze=Ye||(Ye={})).READY="copy-to-clipboard",Ze.ERROR="copy-to-clipboard-error",Ze.SUCCESS="copy-to-clipboard-success";class Xe{url=new URL("http://localhost");copyToClipBoardStatus=Ye.READY;constructor(e){this.root=e,this.root.innerHTML=We,this.button=e.querySelector("[data-template-link-button]"),this.input=e.querySelector("[data-template-link-input]"),this.registerCopyToClipBoard()}setURL(e){this.url=e,this.render()}setCopyToClipBoardStatus(e){this.copyToClipBoardStatus=e,this.render()}render(){switch(this.input.value=this.url.toString(),Object.values(Ye).forEach((e=>{this.button.classList.remove(e)})),this.copyToClipBoardStatus){case Ye.ERROR:this.button.classList.add(Ye.ERROR.valueOf()),this.button.innerHTML='\n<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n   <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"></path>\n   <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path>\n   <path d="M10 12l4 4m0 -4l-4 4"></path>\n</svg>\n';break;case Ye.SUCCESS:this.button.classList.add(Ye.SUCCESS.valueOf()),this.button.innerHTML='\n<svg xmlns="http://www.w3.org/2000/svg"  width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">\n   <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>\n   <path d="M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"></path>\n   <path d="M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"></path>\n   <path d="M9 14l2 2l4 -4"></path>\n</svg>\n';break;default:this.button.innerHTML=Ve}setTimeout((()=>{this.setCopyToClipBoardStatus(Ye.READY)}),5e3)}registerCopyToClipBoard(){this.button.addEventListener("click",(e=>{var t;e.preventDefault(),(t=this.input.value,navigator&&navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(t):Promise.reject("The Clipboard API is not available.")).then((()=>{this.setCopyToClipBoardStatus(Ye.SUCCESS)})).catch((()=>{this.setCopyToClipBoardStatus(Ye.ERROR)}))}))}}var Qe={};e(Qe,"default",(()=>zn),(e=>zn=e));var et={};e(et,"FunctionsClient",(()=>lt),(e=>lt=e));var tt={};e(tt,"resolveFetch",(()=>nt),(e=>nt=e));var rt=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};const nt=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>rt(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve(i("R5nvG"))).fetch(...e)})):fetch),(...e)=>t(...e)};class st extends Error{constructor(e,t="FunctionsError",r){super(e),super.name=t,this.context=r}}class it extends st{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ot extends st{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class at extends st{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ht=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};class lt{constructor(e,{headers:t={},customFetch:r}={}){this.url=e,this.headers=t,this.fetch=(0,tt.resolveFetch)(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return ht(this,void 0,void 0,(function*(){try{const{headers:n,body:s}=t;let i,o={};s&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!=typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",i=s):"string"==typeof s?(o["Content-Type"]="text/plain",i=s):"undefined"!=typeof FormData&&s instanceof FormData?i=s:(o["Content-Type"]="application/json",i=JSON.stringify(s)));const a=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),n),body:i}).catch((e=>{throw new it(e)})),h=a.headers.get("x-relay-error");if(h&&"true"===h)throw new ot(a);if(!a.ok)throw new at(a);let l,c=(null!==(r=a.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return l="application/json"===c?yield a.json():"application/octet-stream"===c?yield a.blob():"multipart/form-data"===c?yield a.formData():yield a.text(),{data:l,error:null}}catch(e){return{data:null,error:e}}}))}}var ct=i("R5nvG");class ut{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=t(ct):this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,r,n;let s=null,i=null,o=null,a=e.status,h=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),s=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&s&&s.length>1&&(o=parseInt(s[1]))}else{const t=await e.text();try{s=JSON.parse(t),Array.isArray(s)&&404===e.status&&(i=[],s=null,a=200,h="OK")}catch(r){404===e.status&&""===t?(a=204,h="No Content"):s={message:t}}if(s&&this.allowEmpty&&(null===(n=null==s?void 0:s.details)||void 0===n?void 0:n.includes("Results contain 0 rows"))&&(s=null,a=200,h="OK"),s&&this.shouldThrowOnError)throw s}return{error:s,data:i,count:o,status:a,statusText:h}}));return this.shouldThrowOnError||(r=r.catch((e=>({error:{message:`FetchError: ${e.message}`,details:"",hint:"",code:e.code||""},data:null,count:null,status:0,statusText:""})))),r.then(e,t)}}class dt extends ut{select(e){let t=!1;const r=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n}={}){const s=n?`${n}.order`:"order",i=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const r=void 0===t?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:r}={}){const n=void 0===r?"offset":`${r}.offset`,s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(s,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:i="text"}={}){const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),a=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${a}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class ft extends dt{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=t.map((e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";"plain"===n?s="pl":"phrase"===n?s="ph":"websearch"===n&&(s="w");const i=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach((([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)})),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}class pt{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=t,this.schema=r,this.fetch=n}select(e,{head:t=!1,count:r}={}){const n=t?"HEAD":"GET";let s=!1;const i=(null!=e?e:"*").split("").map((e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e))).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new ft({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t}={}){const r=[],n=e;if(t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new ft({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:n}={}){const s=[`resolution=${r?"ignore":"merge"}-duplicates`];void 0!==t&&this.url.searchParams.set("on_conflict",t);const i=e;return n&&s.push(`count=${n}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new ft({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r=[],n=e;return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ft({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new ft({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const yt={"X-Client-Info":"postgrest-js/1.4.1"};class vt{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=Object.assign(Object.assign({},yt),t),this.schema=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new pt(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:r=!1,count:n}={}){let s;const i=new URL(`${this.url}/rpc/${e}`);let o;r?(s="HEAD",Object.entries(t).forEach((([e,t])=>{i.searchParams.append(e,`${t}`)}))):(s="POST",o=t);const a=Object.assign({},this.headers);return n&&(a.Prefer=`count=${n}`),new ft({method:s,url:i,headers:a,schema:this.schema,body:o,fetch:this.fetch,allowEmpty:!1})}}var gt={};e(gt,"default",(()=>ar),(e=>ar=e));var mt,bt;if("object"==typeof globalThis)bt=globalThis;else try{bt=i("1EZeK")}catch(e){}finally{if(bt||"undefined"==typeof window||(bt=window),!bt)throw new Error("Could not determine global this")}var wt,_t=bt.WebSocket||bt.MozWebSocket;function Et(e,t){return t?new _t(e,t):new _t(e)}wt=i("ln8A6").version,_t&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(Et,e,{get:function(){return _t[e]}})})),mt={w3cwebsocket:_t?Et:null,version:wt};const Tt={"X-Client-Info":"realtime-js/2.6.0"};var St,kt,At,xt,Ot,Rt,jt,Pt,Ct;(kt=St||(St={}))[kt.connecting=0]="connecting",kt[kt.open=1]="open",kt[kt.closing=2]="closing",kt[kt.closed=3]="closed",(xt=At||(At={})).closed="closed",xt.errored="errored",xt.joined="joined",xt.joining="joining",xt.leaving="leaving",(Rt=Ot||(Ot={})).close="phx_close",Rt.error="phx_error",Rt.join="phx_join",Rt.reply="phx_reply",Rt.leave="phx_leave",Rt.access_token="access_token",(jt||(jt={})).websocket="websocket",(Ct=Pt||(Pt={})).Connecting="connecting",Ct.Open="open",Ct.Closing="closing",Ct.Closed="closed";class Ut{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}class Bt{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),s=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=r.decode(e.slice(i,i+n));i+=n;const a=r.decode(e.slice(i,i+s));i+=s;return{ref:null,topic:o,event:a,payload:JSON.parse(r.decode(e.slice(i,e.byteLength)))}}}var $t,It,Lt,Dt,Nt={};e(Nt,"REALTIME_POSTGRES_CHANGES_LISTEN_EVENT",(()=>Zt),(e=>Zt=e)),e(Nt,"REALTIME_LISTEN_TYPES",(()=>Qt),(e=>Qt=e)),e(Nt,"REALTIME_SUBSCRIBE_STATES",(()=>tr),(e=>tr=e)),e(Nt,"default",(()=>sr),(e=>sr=e));class Mt{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0;"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter((t=>t.status===e)).forEach((e=>e.callback(t)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}(It=$t||($t={})).SYNC="sync",It.JOIN="join",It.LEAVE="leave";class Ft{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ft.syncState(this.state,e,t,r),this.pendingDiffs.forEach((e=>{this.state=Ft.syncDiff(this.state,e,t,r)})),this.pendingDiffs=[],n()})),this.channel._on(r.diff,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ft.syncDiff(this.state,e,t,r),n())})),this.onJoin(((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave(((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,r,n){const s=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(s,((e,t)=>{i[e]||(a[e]=t)})),this.map(i,((e,t)=>{const r=s[e];if(r){const n=t.map((e=>e.presence_ref)),s=r.map((e=>e.presence_ref)),i=t.filter((e=>s.indexOf(e.presence_ref)<0)),h=r.filter((e=>n.indexOf(e.presence_ref)<0));i.length>0&&(o[e]=i),h.length>0&&(a[e]=h)}else o[e]=t})),this.syncDiff(s,{joins:o,leaves:a},r,n)}static syncDiff(e,t,r,n){const{joins:s,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,((t,n)=>{var s;const i=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(n),i.length>0){const r=e[t].map((e=>e.presence_ref)),n=i.filter((e=>r.indexOf(e.presence_ref)<0));e[t].unshift(...n)}r(t,i,n)})),this.map(i,((t,r)=>{let s=e[t];if(!s)return;const i=r.map((e=>e.presence_ref));s=s.filter((e=>i.indexOf(e.presence_ref)<0)),e[t]=s,n(t,s,r),0===s.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((r=>t(r,e[r])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Dt=Lt||(Lt={})).abstime="abstime",Dt.bool="bool",Dt.date="date",Dt.daterange="daterange",Dt.float4="float4",Dt.float8="float8",Dt.int2="int2",Dt.int4="int4",Dt.int4range="int4range",Dt.int8="int8",Dt.int8range="int8range",Dt.json="json",Dt.jsonb="jsonb",Dt.money="money",Dt.numeric="numeric",Dt.oid="oid",Dt.reltime="reltime",Dt.text="text",Dt.time="time",Dt.timestamp="timestamp",Dt.timestamptz="timestamptz",Dt.timetz="timetz",Dt.tsrange="tsrange",Dt.tstzrange="tstzrange";const qt=(e,t,r={})=>{var n;const s=null!==(n=r.skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce(((r,n)=>(r[n]=Jt(n,e,t,s),r)),{})},Jt=(e,t,r,n)=>{const s=t.find((t=>t.name===e)),i=null==s?void 0:s.type,o=r[e];return i&&!n.includes(i)?zt(i,o):Ht(o)},zt=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return Wt(t,r)}switch(e){case Lt.bool:return Gt(t);case Lt.float4:case Lt.float8:case Lt.int2:case Lt.int4:case Lt.int8:case Lt.numeric:case Lt.oid:return Kt(t);case Lt.json:case Lt.jsonb:return Vt(t);case Lt.timestamp:return Yt(t);case Lt.abstime:case Lt.date:case Lt.daterange:case Lt.int4range:case Lt.int8range:case Lt.money:case Lt.reltime:case Lt.text:case Lt.time:case Lt.timestamptz:case Lt.timetz:case Lt.tsrange:case Lt.tstzrange:default:return Ht(t)}},Ht=e=>e,Gt=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Kt=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Vt=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Wt=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const s=e.slice(1,r);try{n=JSON.parse("["+s+"]")}catch(e){n=s?s.split(","):[]}return n.map((e=>zt(t,e)))}return e},Yt=e=>"string"==typeof e?e.replace(" ","T"):e;var Zt,Xt,Qt,er,tr,rr,nr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};(Xt=Zt||(Zt={})).ALL="*",Xt.INSERT="INSERT",Xt.UPDATE="UPDATE",Xt.DELETE="DELETE",(er=Qt||(Qt={})).BROADCAST="broadcast",er.PRESENCE="presence",er.POSTGRES_CHANGES="postgres_changes",(rr=tr||(tr={})).SUBSCRIBED="SUBSCRIBED",rr.TIMED_OUT="TIMED_OUT",rr.CLOSED="CLOSED",rr.CHANNEL_ERROR="CHANNEL_ERROR";class sr{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=At.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new Mt(this,Ot.join,this.params,this.timeout),this.rejoinTimer=new Ut((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=At.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=At.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=At.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=At.errored,this.rejoinTimer.scheduleTimeout())})),this._on(Ot.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Ft(this)}subscribe(e,t=this.timeout){var r,n;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:i}}=this.params;this._onError((t=>e&&e("CHANNEL_ERROR",t))),this._onClose((()=>e&&e("CLOSED")));const o={},a={broadcast:s,presence:i,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map((e=>e.filter)))&&void 0!==n?n:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:a},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(({postgres_changes:t})=>{var r;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),void 0!==t){const n=this.bindings.postgres_changes,s=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,i=[];for(let r=0;r<s;r++){const s=n[r],{filter:{event:o,schema:a,table:h,filter:l}}=s,c=t&&t[r];if(!c||c.event!==o||c.schema!==a||c.table!==h||c.filter!==l)return this.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},s),{id:c.id}))}return this.bindings.postgres_changes=i,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(t=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{e&&e("TIMED_OUT")}))}return this}presenceState(){return this.presence.state}track(e,t={}){return nr(this,void 0,void 0,(function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}))}untrack(e={}){return nr(this,void 0,void 0,(function*(){return yield this.send({type:"presence",event:"untrack"},e)}))}on(e,t,r){return this._on(e,t,r)}send(e,t={}){return new Promise((r=>{var n,s,i;const o=this._push(e.type,e,t.timeout||this.timeout);o.rateLimited&&r("rate limited"),"broadcast"!==e.type||(null===(i=null===(s=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===s?void 0:s.broadcast)||void 0===i?void 0:i.ack)||r("ok"),o.receive("ok",(()=>r("ok"))),o.receive("timeout",(()=>r("timed out")))}))}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=At.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ot.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((r=>{const n=new Mt(this,Ot.leave,{},e);n.receive("ok",(()=>{t(),r("ok")})).receive("timeout",(()=>{t(),r("timed out")})).receive("error",(()=>{r("error")})),n.send(),this._canPush()||n.trigger("ok",{})}))}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Mt(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:h,join:l}=Ot;if(r&&[o,a,h,l].indexOf(i)>=0&&r!==this._joinRef())return;let c=this._onMessage(i,t,r);if(t&&!c)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===i})).map((e=>e.callback(c,r))):null===(s=this.bindings[i])||void 0===s||s.filter((e=>{var r,n,s,o,a,h;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(r=e.filter)||void 0===r?void 0:r.event;return i&&(null===(n=t.ids)||void 0===n?void 0:n.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const r=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===r||r===(null===(h=null==t?void 0:t.event)||void 0===h?void 0:h.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i})).map((e=>{if("object"==typeof c&&"ids"in c){const e=c.data,{schema:t,table:r,commit_timestamp:n,type:s,errors:i}=e,o={schema:t,table:r,commit_timestamp:n,eventType:s,new:{},old:{},errors:i};c=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(c,r)}))}_isClosed(){return this.state===At.closed}_isJoined(){return this.state===At.joined}_isJoining(){return this.state===At.joining}_isLeaving(){return this.state===At.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&sr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ot.close,{},e)}_onError(e){this._on(Ot.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=At.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=qt(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=qt(e.columns,e.old_record)),t}}var ir=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};const or=()=>{};class ar{constructor(e,t){var r;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Tt,this.params={},this.timeout=1e4,this.transport=mt.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=or,this.conn=null,this.sendBuffer=[],this.serializer=new Bt,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${jt.websocket}`,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),(null==t?void 0:t.transport)&&(this.transport=t.transport),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const n=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.eventsPerSecond;n&&(this.eventsPerSecondLimitMs=Math.floor(1e3/n)),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ut((()=>ir(this,void 0,void 0,(function*(){this.disconnect(),this.connect()}))),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return e.unsubscribe().then((e=>(0===this.channels.length&&this.disconnect(),e)))}removeAllChannels(){return Promise.all(this.channels.map((e=>e.unsubscribe()))).then((e=>(this.disconnect(),e)))}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case St.connecting:return Pt.Connecting;case St.open:return Pt.Open;case St.closing:return Pt.Closing;default:return Pt.Closed}}isConnected(){return this.connectionState()===Pt.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const r=new(0,Nt.default)(`realtime:${e}`,t,this);return this.channels.push(r),r}push(e){const{topic:t,event:r,payload:n,ref:s}=e;let i=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};if(this.log("push",`${t} ${r} (${s})`,n),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(r)){if(this._throttle(i)())return"rate limited"}else i();else this.sendBuffer.push(i)}setAuth(e){this.accessToken=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(Ot.access_token,{access_token:e})}))}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:r,payload:n,ref:s}=e;(s&&s===this.pendingHeartbeatRef||r===(null==n?void 0:n.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${s&&"("+s+")"||""}`,n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(r,n,s))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this._sendHeartbeat()),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(Ot.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>!!this.inThrottle||(e(),t>0&&(this.inThrottle=!0,setTimeout((()=>{this.inThrottle=!1}),t)),!1)}}var hr={};e(hr,"default",(()=>jr),(e=>jr=e));class lr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function cr(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class ur extends lr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class dr extends lr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var fr={};e(fr,"get",(()=>Tr),(e=>Tr=e)),e(fr,"post",(()=>Sr),(e=>Sr=e)),e(fr,"put",(()=>kr),(e=>kr=e)),e(fr,"remove",(()=>Ar),(e=>Ar=e));var pr={};e(pr,"resolveFetch",(()=>vr),(e=>vr=e)),e(pr,"resolveResponse",(()=>gr),(e=>gr=e));var yr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};const vr=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>yr(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve(i("R5nvG"))).fetch(...e)})):fetch),(...e)=>t(...e)},gr=()=>yr(void 0,void 0,void 0,(function*(){return"undefined"==typeof Response?(yield Promise.resolve(i("R5nvG"))).Response:Response}));var mr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};const br=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wr=(e,t)=>mr(void 0,void 0,void 0,(function*(){const r=yield(0,pr.resolveResponse)();e instanceof r?e.json().then((r=>{t(new ur(br(r),e.status||500))})):t(new dr(br(e),e))})),_r=(e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};function Er(e,t,r,n,s,i){return mr(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(r,_r(t,n,s,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>wr(e,a)))}))}))}function Tr(e,t,r,n){return mr(this,void 0,void 0,(function*(){return Er(e,"GET",t,r,n)}))}function Sr(e,t,r,n,s){return mr(this,void 0,void 0,(function*(){return Er(e,"POST",t,n,s,r)}))}function kr(e,t,r,n,s){return mr(this,void 0,void 0,(function*(){return Er(e,"PUT",t,n,s,r)}))}function Ar(e,t,r,n,s){return mr(this,void 0,void 0,(function*(){return Er(e,"DELETE",t,n,s,r)}))}var xr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};const Or={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class jr{constructor(e,t={},r,n){this.url=e,this.headers=t,this.bucketId=r,this.fetch=(0,pr.resolveFetch)(n)}uploadOrUpdate(e,t,r,n){return xr(this,void 0,void 0,(function*(){try{let s;const i=Object.assign(Object.assign({},Rr),n),o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(s=new FormData,s.append("cacheControl",i.cacheControl),s.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(s=r,s.append("cacheControl",i.cacheControl)):(s=r,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType);const a=this._removeEmptyFolders(t),h=this._getFinalPath(a),l=yield this.fetch(`${this.url}/object/${h}`,{method:e,body:s,headers:o});if(l.ok)return{data:{path:a},error:null};return{data:null,error:yield l.json()}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}upload(e,t,r){return xr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,r)}))}update(e,t,r){return xr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,r)}))}move(e,t){return xr(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.post)(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}copy(e,t){return xr(this,void 0,void 0,(function*(){try{return{data:{path:(yield(0,fr.post)(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}createSignedUrl(e,t,r){return xr(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),s=yield(0,fr.post)(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${i}`)},{data:s,error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}createSignedUrls(e,t,r){return xr(this,void 0,void 0,(function*(){try{const n=yield(0,fr.post)(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null}))),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}download(e,t){return xr(this,void 0,void 0,(function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield(0,fr.get)(this.fetch,`${this.url}/${r}/${t}${s}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&n.push(s);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&n.push(o);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${r}${a}`)}}}remove(e){return xr(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.remove)(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}list(e,t,r){return xr(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},Or),t),{prefix:e||""});return{data:yield(0,fr.post)(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}var Pr={};e(Pr,"default",(()=>Br),(e=>Br=e));const Cr={"X-Client-Info":"storage-js/2.3.0"};var Ur=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};class Br{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Cr),t),this.fetch=(0,pr.resolveFetch)(r)}listBuckets(){return Ur(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.get)(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}getBucket(e){return Ur(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.get)(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}createBucket(e,t={public:!1}){return Ur(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.post)(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}updateBucket(e,t){return Ur(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.put)(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}emptyBucket(e){return Ur(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.post)(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}deleteBucket(e){return Ur(this,void 0,void 0,(function*(){try{return{data:yield(0,fr.remove)(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(e){if(cr(e))return{data:null,error:e};throw e}}))}}class $r extends Pr.default{constructor(e,t={},r){super(e,t,r)}from(e){return new(0,hr.default)(this.url,this.headers,e,this.fetch)}}const Ir={"X-Client-Info":"supabase-js/2.8.0"};var Lr={};e(Lr,"fetchWithAuth",(()=>Nr),(e=>Nr=e));ct=i("R5nvG");var Dr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};const Nr=(e,r,n)=>{const s=(e=>{let r;return r=e||("undefined"==typeof fetch?t(ct):fetch),(...e)=>r(...e)})(n),i="undefined"==typeof Headers?ct.Headers:Headers;return(t,n)=>Dr(void 0,void 0,void 0,(function*(){var o;const a=null!==(o=yield r())&&void 0!==o?o:e;let h=new i(null==n?void 0:n.headers);return h.has("apikey")||h.set("apikey",e),h.has("Authorization")||h.set("Authorization",`Bearer ${a}`),s(t,Object.assign(Object.assign({},n),{headers:h}))}))};function Mr(e,t){const{db:r,auth:n,realtime:s,global:i}=e,{db:o,auth:a,realtime:h,global:l}=t;return{db:Object.assign(Object.assign({},o),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},h),s),global:Object.assign(Object.assign({},l),i)}}var Fr={};e(Fr,"default",(()=>jn),(e=>jn=e));var qr={};e(qr,"_request",(()=>En),(e=>En=e)),e(qr,"_sessionResponse",(()=>Tn),(e=>Tn=e)),e(qr,"_userResponse",(()=>Sn),(e=>Sn=e)),e(qr,"_ssoResponse",(()=>kn),(e=>kn=e)),e(qr,"_generateLinkResponse",(()=>An),(e=>An=e)),e(qr,"_noResolveJsonResponse",(()=>xn),(e=>xn=e));var Jr={};e(Jr,"expiresAt",(()=>Hr),(e=>Hr=e)),e(Jr,"uuid",(()=>Gr),(e=>Gr=e)),e(Jr,"isBrowser",(()=>Kr),(e=>Kr=e)),e(Jr,"supportsLocalStorage",(()=>Wr),(e=>Wr=e)),e(Jr,"getParameterByName",(()=>Yr),(e=>Yr=e)),e(Jr,"resolveFetch",(()=>Zr),(e=>Zr=e)),e(Jr,"looksLikeFetchResponse",(()=>Xr),(e=>Xr=e)),e(Jr,"setItemAsync",(()=>Qr),(e=>Qr=e)),e(Jr,"getItemAsync",(()=>en),(e=>en=e)),e(Jr,"removeItemAsync",(()=>tn),(e=>tn=e)),e(Jr,"Deferred",(()=>rn),(e=>rn=e)),e(Jr,"decodeJWTPayload",(()=>nn),(e=>nn=e)),e(Jr,"sleep",(()=>sn),(e=>sn=e)),e(Jr,"retryable",(()=>on),(e=>on=e));var zr=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};function Hr(e){return Math.round(Date.now()/1e3)+e}function Gr(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}))}const Kr=()=>"undefined"!=typeof document,Vr={tested:!1,writable:!1},Wr=()=>{if(!Kr())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(e){return!1}if(Vr.tested)return Vr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Vr.tested=!0,Vr.writable=!0}catch(e){Vr.tested=!0,Vr.writable=!1}return Vr.writable};function Yr(e,t){var r;t||(t=(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.href)||""),e=e.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}const Zr=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zr(void 0,void 0,void 0,(function*(){return yield(yield Promise.resolve(i("R5nvG"))).fetch(...e)})):fetch),(...e)=>t(...e)},Xr=e=>"object"==typeof e&&null!==e&&"status"in e&&"ok"in e&&"json"in e&&"function"==typeof e.json,Qr=(e,t,r)=>zr(void 0,void 0,void 0,(function*(){yield e.setItem(t,JSON.stringify(r))})),en=(e,t)=>zr(void 0,void 0,void 0,(function*(){const r=yield e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(e){return r}})),tn=(e,t)=>zr(void 0,void 0,void 0,(function*(){yield e.removeItem(t)}));class rn{constructor(){this.promise=new rn.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function nn(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,n,s,i,o,a,h,l="",c=0;for(e=e.replace("-","+").replace("_","/");c<e.length;)i=t.indexOf(e.charAt(c++)),o=t.indexOf(e.charAt(c++)),a=t.indexOf(e.charAt(c++)),h=t.indexOf(e.charAt(c++)),r=i<<2|o>>4,n=(15&o)<<4|a>>2,s=(3&a)<<6|h,l+=String.fromCharCode(r),64!=a&&0!=n&&(l+=String.fromCharCode(n)),64!=h&&0!=s&&(l+=String.fromCharCode(s));return l}(r))}function sn(e){return new Promise((t=>{setTimeout((()=>t(null)),e)}))}function on(e,t){return new Promise(((r,n)=>{(()=>{zr(this,void 0,void 0,(function*(){for(let s=0;s<1/0;s++)try{const n=yield e(s);if(!t(s,null,n))return void r(n)}catch(e){if(!t(s,e))return void n(e)}}))})()}))}rn.promiseConstructor=Promise;class an extends Error{constructor(e,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t}}function hn(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class ln extends an{constructor(e,t){super(e,t),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function cn(e){return hn(e)&&"AuthApiError"===e.name}class un extends an{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class dn extends an{constructor(e,t,r){super(e),this.name=t,this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class fn extends dn{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class pn extends dn{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class yn extends dn{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class vn extends dn{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var gn=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))},mn=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};const bn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),wn=(e,t)=>gn(void 0,void 0,void 0,(function*(){(0,Jr.looksLikeFetchResponse)(e)?[502,503,504].includes(e.status)?t(new vn(bn(e),e.status)):e.json().then((r=>{t(new ln(bn(r),e.status||500))})).catch((e=>{t(new un(bn(e),e))})):t(new vn(bn(e),0))})),_n=(e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};function En(e,t,r,n){var s;return gn(this,void 0,void 0,(function*(){const i=Object.assign({},null==n?void 0:n.headers);(null==n?void 0:n.jwt)&&(i.Authorization=`Bearer ${n.jwt}`);const o=null!==(s=null==n?void 0:n.query)&&void 0!==s?s:{};(null==n?void 0:n.redirectTo)&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",h=yield function(e,t,r,n,s,i){return gn(this,void 0,void 0,(function*(){return new Promise(((o,a)=>{e(r,_n(t,n,s,i)).then((e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()})).then((e=>o(e))).catch((e=>wn(e,a)))}))}))}(e,t,r+a,{headers:i,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(h):{data:Object.assign({},h),error:null}}))}function Tn(e){var t;let r=null;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),r.expires_at=(0,Jr.expiresAt)(e.expires_in));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Sn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function kn(e){return{data:e,error:null}}function An(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=e,o=mn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},user:Object.assign({},o)},error:null}}function xn(e){return e}var On=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))},Rn=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r};class jn{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=(0,Jr.resolveFetch)(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return On(this,void 0,void 0,(function*(){try{return yield(0,qr._request)(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}inviteUserByEmail(e,t={}){return On(this,void 0,void 0,(function*(){try{return yield(0,qr._request)(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:qr._userResponse})}catch(e){if(hn(e))return{data:{user:null},error:e};throw e}}))}generateLink(e){return On(this,void 0,void 0,(function*(){try{const{options:t}=e,r=Rn(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),yield(0,qr._request)(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:qr._generateLinkResponse,redirectTo:null==t?void 0:t.redirectTo})}catch(e){if(hn(e))return{data:{properties:null,user:null},error:e};throw e}}))}createUser(e){return On(this,void 0,void 0,(function*(){try{return yield(0,qr._request)(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:qr._userResponse})}catch(e){if(hn(e))return{data:{user:null},error:e};throw e}}))}listUsers(e){var t,r,n,s,i,o,a;return On(this,void 0,void 0,(function*(){try{const h={nextPage:null,lastPage:0,total:0},l=yield(0,qr._request)(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(s=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==s?s:""},xform:qr._noResolveJsonResponse});if(l.error)throw l.error;const c=yield l.json(),u=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,d=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return d.length>0&&(d.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);h[`${r}Page`]=t})),h.total=parseInt(u)),{data:Object.assign(Object.assign({},c),h),error:null}}catch(e){if(hn(e))return{data:{users:[]},error:e};throw e}}))}getUserById(e){return On(this,void 0,void 0,(function*(){try{return yield(0,qr._request)(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:qr._userResponse})}catch(e){if(hn(e))return{data:{user:null},error:e};throw e}}))}updateUserById(e,t){return On(this,void 0,void 0,(function*(){try{return yield(0,qr._request)(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:qr._userResponse})}catch(e){if(hn(e))return{data:{user:null},error:e};throw e}}))}deleteUser(e,t=!1){return On(this,void 0,void 0,(function*(){try{return yield(0,qr._request)(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:qr._userResponse})}catch(e){if(hn(e))return{data:{user:null},error:e};throw e}}))}_listFactors(e){return On(this,void 0,void 0,(function*(){try{const{data:t,error:r}=yield(0,qr._request)(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}_deleteFactor(e){return On(this,void 0,void 0,(function*(){try{return{data:yield(0,qr._request)(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}}var Pn={};e(Pn,"default",(()=>Ln),(e=>Ln=e));const Cn={"X-Client-Info":"gotrue-js/2.12.1"};var Un={getItem:e=>(0,Jr.supportsLocalStorage)()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{(0,Jr.supportsLocalStorage)()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{(0,Jr.supportsLocalStorage)()&&globalThis.localStorage.removeItem(e)}};var Bn=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const $n={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cn},In=1e4;class Ln{constructor(e){this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;const t=Object.assign(Object.assign({},$n),e);this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||Un,this.admin=new(0,Fr.default)({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=(0,Jr.resolveFetch)(t.fetch),this.detectSessionInUrl=t.detectSessionInUrl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},(0,Jr.isBrowser)()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey&&(this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey),this.broadcastChannel.addEventListener("message",(e=>{this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))),this.initialize()}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return Bn(this,void 0,void 0,(function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:t}=yield this._getSessionFromUrl();if(t)return yield this._removeSession(),{error:t};const{session:r,redirectType:n}=e;return yield this._saveSession(r),this._notifyAllSubscribers("SIGNED_IN",r),"recovery"===n&&this._notifyAllSubscribers("PASSWORD_RECOVERY",r),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return hn(e)?{error:e}:{error:new un("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange()}}))}signUp(e){var t,r;return Bn(this,void 0,void 0,(function*(){try{let n;if(yield this._removeSession(),"email"in e){const{email:r,password:s,options:i}=e;n=yield(0,qr._request)(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:qr._sessionResponse})}else{if(!("phone"in e))throw new pn("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;n=yield(0,qr._request)(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:qr._sessionResponse})}}const{data:s,error:i}=n;if(i||!s)return{data:{user:null,session:null},error:i};const o=s.session,a=s.user;return s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(e){if(hn(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithPassword(e){var t,r;return Bn(this,void 0,void 0,(function*(){try{let n;if(yield this._removeSession(),"email"in e){const{email:r,password:s,options:i}=e;n=yield(0,qr._request)(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:qr._sessionResponse})}else{if(!("phone"in e))throw new pn("You must provide either an email or phone number and a password");{const{phone:t,password:s,options:i}=e;n=yield(0,qr._request)(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:t,password:s,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:qr._sessionResponse})}}const{data:s,error:i}=n;return i||!s?{data:{user:null,session:null},error:i}:(s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:i})}catch(e){if(hn(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithOAuth(e){var t,r,n,s;return Bn(this,void 0,void 0,(function*(){return yield this._removeSession(),this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}))}signInWithIdToken(e){return Bn(this,void 0,void 0,(function*(){yield this._removeSession();try{const{options:t,provider:r,token:n,nonce:s}=e,i=yield(0,qr._request)(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,nonce:s,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:qr._sessionResponse}),{data:o,error:a}=i;return a||!o?{data:{user:null,session:null},error:a}:(o.session&&(yield this._saveSession(o.session),this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:a})}catch(e){if(hn(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithOtp(e){var t,r,n,s;return Bn(this,void 0,void 0,(function*(){try{if(yield this._removeSession(),"email"in e){const{email:n,options:s}=e,{error:i}=yield(0,qr._request)(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(r=null==s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:t,options:r}=e,{error:i}=yield(0,qr._request)(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(s=null==r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null},error:i}}throw new pn("You must provide either an email or phone number.")}catch(e){if(hn(e))return{data:{user:null,session:null},error:e};throw e}}))}verifyOtp(e){var t,r;return Bn(this,void 0,void 0,(function*(){try{yield this._removeSession();const{data:n,error:s}=yield(0,qr._request)(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:null===(t=e.options)||void 0===t?void 0:t.captchaToken}}),redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,xform:qr._sessionResponse});if(s)throw s;if(!n)throw"An error occurred on token verification.";const i=n.session,o=n.user;return(null==i?void 0:i.access_token)&&(yield this._saveSession(i),this._notifyAllSubscribers("SIGNED_IN",i)),{data:{user:o,session:i},error:null}}catch(e){if(hn(e))return{data:{user:null,session:null},error:e};throw e}}))}signInWithSSO(e){var t,r,n;return Bn(this,void 0,void 0,(function*(){try{return yield this._removeSession(),yield(0,qr._request)(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:qr._ssoResponse})}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}getSession(){return Bn(this,void 0,void 0,(function*(){yield this.initializePromise;let e=null;if(this.persistSession){const t=yield(0,Jr.getItemAsync)(this.storage,this.storageKey);null!==t&&(this._isValidSession(t)?e=t:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(!!e.expires_at&&e.expires_at<=Date.now()/1e3))return{data:{session:e},error:null};const{session:t,error:r}=yield this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:t},error:null}}))}getUser(e){var t,r;return Bn(this,void 0,void 0,(function*(){try{if(!e){const{data:n,error:s}=yield this.getSession();if(s)throw s;e=null!==(r=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==r?r:void 0}return yield(0,qr._request)(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qr._userResponse})}catch(e){if(hn(e))return{data:{user:null},error:e};throw e}}))}updateUser(e,t={}){return Bn(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();if(n)throw n;if(!r.session)throw new fn;const s=r.session,{data:i,error:o}=yield(0,qr._request)(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:e,jwt:s.access_token,xform:qr._userResponse});if(o)throw o;return s.user=i.user,yield this._saveSession(s),this._notifyAllSubscribers("USER_UPDATED",s),{data:{user:s.user},error:null}}catch(e){if(hn(e))return{data:{user:null},error:e};throw e}}))}_decodeJWT(e){return(0,Jr.decodeJWTPayload)(e)}setSession(e){return Bn(this,void 0,void 0,(function*(){try{if(!e.access_token||!e.refresh_token)throw new fn;const t=Date.now()/1e3;let r=t,n=!0,s=null;const i=(0,Jr.decodeJWTPayload)(e.access_token);if(i.exp&&(r=i.exp,n=r<=t),n){const{session:t,error:r}=yield this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:n,error:i}=yield this.getUser(e.access_token);if(i)throw i;s={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},yield this._saveSession(s),this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(e){if(hn(e))return{data:{session:null,user:null},error:e};throw e}}))}refreshSession(e){var t;return Bn(this,void 0,void 0,(function*(){try{if(!e){const{data:r,error:n}=yield this.getSession();if(n)throw n;e=null!==(t=r.session)&&void 0!==t?t:void 0}if(!(null==e?void 0:e.refresh_token))throw new fn;const{session:r,error:n}=yield this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}}catch(e){if(hn(e))return{data:{user:null,session:null},error:e};throw e}}))}_getSessionFromUrl(){return Bn(this,void 0,void 0,(function*(){try{if(!(0,Jr.isBrowser)())throw new yn("No browser detected.");if(!this._isImplicitGrantFlow())throw new yn("Not a valid implicit grant flow url.");const e=(0,Jr.getParameterByName)("error_description");if(e){const t=(0,Jr.getParameterByName)("error_code");if(!t)throw new yn("No error_code detected.");const r=(0,Jr.getParameterByName)("error");if(!r)throw new yn("No error detected.");throw new yn(e,{error:r,code:t})}const t=(0,Jr.getParameterByName)("provider_token"),r=(0,Jr.getParameterByName)("provider_refresh_token"),n=(0,Jr.getParameterByName)("access_token");if(!n)throw new yn("No access_token detected.");const s=(0,Jr.getParameterByName)("expires_in");if(!s)throw new yn("No expires_in detected.");const i=(0,Jr.getParameterByName)("refresh_token");if(!i)throw new yn("No refresh_token detected.");const o=(0,Jr.getParameterByName)("token_type");if(!o)throw new yn("No token_type detected.");const a=Math.round(Date.now()/1e3)+parseInt(s),{data:h,error:l}=yield this.getUser(n);if(l)throw l;const c=h.user,u={provider_token:t,provider_refresh_token:r,access_token:n,expires_in:parseInt(s),expires_at:a,refresh_token:i,token_type:o,user:c},d=(0,Jr.getParameterByName)("type");return window.location.hash="",{data:{session:u,redirectType:d},error:null}}catch(e){if(hn(e))return{data:{session:null,redirectType:null},error:e};throw e}}))}_isImplicitGrantFlow(){return(0,Jr.isBrowser)()&&(Boolean((0,Jr.getParameterByName)("access_token"))||Boolean((0,Jr.getParameterByName)("error_description")))}signOut(){var e;return Bn(this,void 0,void 0,(function*(){const{data:t,error:r}=yield this.getSession();if(r)return{error:r};const n=null===(e=t.session)||void 0===e?void 0:e.access_token;if(n){const{error:e}=yield this.admin.signOut(n);if(e&&(!cn(e)||404!==e.status&&401!==e.status))return{error:e}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}}))}onAuthStateChange(e){const t=(0,Jr.uuid)(),r={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,r),{data:{subscription:r}}}resetPasswordForEmail(e,t={}){return Bn(this,void 0,void 0,(function*(){try{return yield(0,qr._request)(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}_refreshAccessToken(e){return Bn(this,void 0,void 0,(function*(){try{const t=Date.now();return yield(0,Jr.retryable)((t=>Bn(this,void 0,void 0,(function*(){return yield(0,Jr.sleep)(200*t),yield(0,qr._request)(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:qr._sessionResponse})}))),((e,r,n)=>n&&n.error&&n.error instanceof vn&&Date.now()+200*(e+1)-t<In))}catch(e){if(hn(e))return{data:{session:null,user:null},error:e};throw e}}))}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t={}){const r=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return(0,Jr.isBrowser)()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}_recoverAndRefresh(){var e;return Bn(this,void 0,void 0,(function*(){try{const t=yield(0,Jr.getItemAsync)(this.storage,this.storageKey);if(!this._isValidSession(t))return void(null!==t&&(yield this._removeSession()));const r=Math.round(Date.now()/1e3);if((null!==(e=t.expires_at)&&void 0!==e?e:1/0)<r+10)if(this.autoRefreshToken&&t.refresh_token){const{error:e}=yield this._callRefreshToken(t.refresh_token);e&&(console.log(e.message),yield this._removeSession())}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(e){return void console.error(e)}}))}_callRefreshToken(e){var t,r;return Bn(this,void 0,void 0,(function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new(0,Jr.Deferred),!e)throw new fn;const{data:t,error:r}=yield this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new fn;yield this._saveSession(t.session),this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(e){if(hn(e)){const r={session:null,error:e};return null===(t=this.refreshingDeferred)||void 0===t||t.resolve(r),r}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(e),e}finally{this.refreshingDeferred=null}}))}_notifyAllSubscribers(e,t,r=!0){this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach((r=>r.callback(e,t)))}_saveSession(e){return Bn(this,void 0,void 0,(function*(){this.persistSession||(this.inMemorySession=e),this.persistSession&&e.expires_at&&(yield this._persistSession(e))}))}_persistSession(e){return(0,Jr.setItemAsync)(this.storage,this.storageKey,e)}_removeSession(){return Bn(this,void 0,void 0,(function*(){this.persistSession?yield(0,Jr.removeItemAsync)(this.storage,this.storageKey):this.inMemorySession=null}))}_removeVisibilityChangedCallback(){const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&(0,Jr.isBrowser)()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(e){console.error("removing visibilitychange callback failed",e)}}_startAutoRefresh(){return Bn(this,void 0,void 0,(function*(){yield this._stopAutoRefresh();const e=setInterval((()=>this._autoRefreshTokenTick()),In);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref&&e.unref(),yield this._autoRefreshTokenTick()}))}_stopAutoRefresh(){return Bn(this,void 0,void 0,(function*(){const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}))}startAutoRefresh(){return Bn(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()}))}stopAutoRefresh(){return Bn(this,void 0,void 0,(function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()}))}_autoRefreshTokenTick(){return Bn(this,void 0,void 0,(function*(){const e=Date.now();try{const{data:{session:t}}=yield this.getSession();if(!t||!t.refresh_token||!t.expires_at)return;Math.floor((1e3*t.expires_at-e)/In)<3&&(yield this._callRefreshToken(t.refresh_token))}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}))}_handleVisibilityChange(){return Bn(this,void 0,void 0,(function*(){if(!(0,Jr.isBrowser)()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>Bn(this,void 0,void 0,(function*(){return yield this._onVisibilityChanged(!1)})),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}))}_onVisibilityChanged(e){return Bn(this,void 0,void 0,(function*(){"visible"===document.visibilityState?(e||(yield this.initializePromise,yield this._recoverAndRefresh()),this.autoRefreshToken&&this._startAutoRefresh()):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}))}_getUrlForProvider(e,t){const r=[`provider=${encodeURIComponent(e)}`];if((null==t?void 0:t.redirectTo)&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null==t?void 0:t.scopes)&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),null==t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);r.push(e.toString())}return`${this.url}/authorize?${r.join("&")}`}_unenroll(e){var t;return Bn(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();return n?{data:null,error:n}:yield(0,qr._request)(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(t=null==r?void 0:r.session)||void 0===t?void 0:t.access_token})}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}_enroll(e){var t,r;return Bn(this,void 0,void 0,(function*(){try{const{data:n,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:i,error:o}=yield(0,qr._request)(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(t=null==n?void 0:n.session)||void 0===t?void 0:t.access_token});return o?{data:null,error:o}:((null===(r=null==i?void 0:i.totp)||void 0===r?void 0:r.qr_code)&&(i.totp.qr_code=`data:image/svg+xml;utf-8,${i.totp.qr_code}`),{data:i,error:null})}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}_verify(e){var t;return Bn(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();if(n)return{data:null,error:n};const{data:s,error:i}=yield(0,qr._request)(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(t=null==r?void 0:r.session)||void 0===t?void 0:t.access_token});return i?{data:null,error:i}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:i})}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}_challenge(e){var t;return Bn(this,void 0,void 0,(function*(){try{const{data:r,error:n}=yield this.getSession();return n?{data:null,error:n}:yield(0,qr._request)(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:null===(t=null==r?void 0:r.session)||void 0===t?void 0:t.access_token})}catch(e){if(hn(e))return{data:null,error:e};throw e}}))}_challengeAndVerify(e){return Bn(this,void 0,void 0,(function*(){const{data:t,error:r}=yield this._challenge({factorId:e.factorId});return r?{data:null,error:r}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}))}_listFactors(){return Bn(this,void 0,void 0,(function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],n=r.filter((e=>"totp"===e.factor_type&&"verified"===e.status));return{data:{all:r,totp:n},error:null}}))}_getAuthenticatorAssuranceLevel(){var e,t;return Bn(this,void 0,void 0,(function*(){const{data:{session:r},error:n}=yield this.getSession();if(n)return{data:null,error:n};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(r.access_token);let i=null;s.aal&&(i=s.aal);let o=i;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter((e=>"verified"===e.status)))&&void 0!==t?t:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:s.amr||[]},error:null}}))}}class Dn extends Pn.default{constructor(e){super(e)}}var Nn=function(e,t,r,n){return new(r||(r=Promise))((function(s,i){function o(e){try{h(n.next(e))}catch(e){i(e)}}function a(e){try{h(n.throw(e))}catch(e){i(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}h((n=n.apply(e,t||[])).next())}))};const Mn={headers:Ir},Fn={schema:"public"},qn={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},Jn={};class zn{constructor(e,t,r){var n,s,i,o,a,h,l,c;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const u=e.replace(/\/$/,"");this.realtimeUrl=`${u}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${u}/auth/v1`,this.storageUrl=`${u}/storage/v1`;if(u.match(/(supabase\.co)|(supabase\.in)/)){const e=u.split(".");this.functionsUrl=`${e[0]}.functions.${e[1]}.${e[2]}`}else this.functionsUrl=`${u}/functions/v1`;const d=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,f=Mr(null!=r?r:{},{db:Fn,realtime:Jn,auth:Object.assign(Object.assign({},qn),{storageKey:d}),global:Mn});this.storageKey=null!==(s=null===(n=f.auth)||void 0===n?void 0:n.storageKey)&&void 0!==s?s:"",this.headers=null!==(o=null===(i=f.global)||void 0===i?void 0:i.headers)&&void 0!==o?o:{},this.auth=this._initSupabaseAuthClient(null!==(a=f.auth)&&void 0!==a?a:{},this.headers,null===(h=f.global)||void 0===h?void 0:h.fetch),this.fetch=(0,Lr.fetchWithAuth)(t,this._getAccessToken.bind(this),null===(l=f.global)||void 0===l?void 0:l.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},f.realtime)),this.rest=new vt(`${u}/rest/v1`,{headers:this.headers,schema:null===(c=f.db)||void 0===c?void 0:c.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new(0,et.FunctionsClient)(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $r(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},r){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Nn(this,void 0,void 0,(function*(){const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,storageKey:s},i,o){const a={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Dn({url:this.authUrl,headers:Object.assign(Object.assign({},a),i),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,fetch:o})}_initRealtimeClient(e){return new(0,gt.default)(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,null==t?void 0:t.access_token,"CLIENT")}))}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"!==e&&"USER_DELETED"!==e||(this.realtime.setAuth(this.supabaseKey),"STORAGE"==r&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!=t?t:null),this.changedAccessToken=t)}}let Hn=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"");const Gn=new(0,Qe.default)(void 0,void 0,Kn);var Kn;const Vn=async(e,t)=>{const r=Hn(11),{error:n}=await Gn.from("password").insert({id:r,iv:e,cipherText:t});return n?Promise.reject(n):r};class Wn{data="";constructor(e){this.root=e,this.root.innerHTML='\n    <textarea data-template-result-textarea name="payload" rows="12"\n          class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-green-500 focus:border-green-500"\n          readonly></textarea>\n',this.textArea=e.querySelector("[data-template-result-textarea]")}setResult(e){this.data=e,this.render()}render(){this.textArea.value=this.data}}const Yn=async({key:e,iv:t,cipherText:r})=>{const n=new TextDecoder,s=await(async e=>await crypto.subtle.importKey("raw",He(e),"AES-CBC",!0,["decrypt"]))(e),i=await crypto.subtle.decrypt({name:"AES-CBC",iv:He(t)},s,He(r));return n.decode(i)};var Zn;Zn=async function(){const e=document.getElementById("content"),t=(()=>{const e=new URL(window.location.href);return{id:e.searchParams.get("i"),key:e.searchParams.get("k")}})();if(t.id&&t.key){const r=new Wn(e),n=await(async e=>{try{const{data:t,error:r}=await Gn.from("password").select("iv, cipherText").eq("id",e).single();return r?void console.error("error",r):t}catch(e){console.error("Error retrieving data from db",e)}})(t.id);n&&Yn({key:t.key,iv:n.iv,cipherText:n.cipherText}).then((e=>r.setResult(e)))}else new o(e,((t,r)=>{r.preventDefault(),Ke(t||"").then((t=>{Vn(t.iv,t.cipherText).then((r=>{const n=new Xe(e);console.log(t.key),n.setURL(((e,t)=>{const r=new URL(window.location.href);return r.pathname="/",r.searchParams.set("i",e),r.searchParams.set("k",t),r})(r,t.key))}))}))}))},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",(()=>{Zn()})):Zn();
//# sourceMappingURL=index.eb8f6d10.js.map
